# 范式

设计关系模型的规范

## 第一范式

属性不可再分，即不存在复合属性

这是形成一个关系表的基本条件

只满足这一个条件的表缺点比较大，较为冗余。比如包含多个实体的属性，使得一些属性值重复出现。如下例子

|学号|姓名|系名|系主任|课程号|成绩|
|-|-|-|-|-|-|
|01|小明|计算机|老王|M1|90|
|02|小兰|数学|王哥|M1|86|
|03|小三|计算机|老王|M2|85|
|04|小四|计算机|老王|M2|89|
|01|小明|计算机|老王|M2|76|
|02|小兰|数学|王哥|M2|78|

像这种学生，课程，系的实体都放在一个表上就造成了冗余，比如系名、系主任这里有多次重复

## 第二范式

在第一范式的基础上，每个非主属性都不不能由候选键的其中一部分主属性直接确定，即消除了部分依赖

在上面的例子中

学号确定姓名

学号确定系名

系名确定系主任

（学号，课程号）确定成绩

综上，学号，课程号才能够唯一标识一条记录。主属性为学号，课程。姓名，系名，与主属性存在部分依赖

所以将学号和课程号分开
|学号|姓名|系名|系主任|
|-|-|-|-|-|-|
|01|小明|计算机|老王|
|02|小兰|数学|王哥|
|03|小三|计算机|老王|
|04|小四|计算机|老王|

|学号|课程号|成绩|
|-|-|-|
|01|M1|90|
|02|M1|86|
|03|M2|85|
|04|M2|89|
|01|M2|76|
|02|M2|78|

这样就消除了部分依赖，满足了第二范式

## 第三范式

在第二范式的基础上，每个非主属性都能由候选键列直接确定，即消除了传递依赖

必须满足第二范式

以第二范式中分开的一个关系表为例

|学号|姓名|系名|系主任|
|-|-|-|-|
|01|小明|计算机|老王|
|02|小兰|数学|王哥|
|03|小三|计算机|老王|
|04|小四|计算机|老王|

主属性是学号

学号确定系名
系名确定系主任

系主任传递依赖于学号

所以将系名和系主任分出去

|学号|姓名|系名|
|-|-|-|
|01|小明|计算机|
|02|小兰|数学|
|03|小三|计算机|
|04|小四|计算机|

|系名|系主任|
|-|-|
|计算机|老王|
|数学|王哥|

# SQL语句

## 增

insert into 表名(...) values(...)

## 删

delete from 表名 where ...

## 改

update 表名 set ... where ...

## 查

select ... from 表名 where ...

### 聚合函数

Min最小值
Max最大值
Avg平均值
Sum求和
Count计数

### 分组查询

group by 列名

一般与聚合函数一起用，前面查询的列中除了聚合函数中的列，其他的列不能包含分组的列以外的列

### 分组后条件查询

having

用在group by 语句之后，与where作用类似

### 排序

order by 属性名

默认是升序排列，如果想要降序排列需要在最后加上desc关键字

### 关键字

#### distinct

去掉查询结果中重复的数据，一般修饰某个属性，即该属性相同的记录只显示一次

#### union

用在两个sql语句之间，用于将查询结果取并集，两个查询结果的列必须一致

#### intersect

用在两个sql语句之间，用于将查询结果取交集，两个查询结果的列必须一致

#### as

用在查询的列名后面，用于起别名

#### like

用在查询条件中，模糊查询，%匹配0个或多个字符，_匹配一个字符

# 数据库新技术

## 关系型数据库

一张张相互存在联系的二维表格，列代表属性，行代表记录

## NoSQl

非关系型数据库，采用Key-Value的形式，适用更大规模的数据，速度更快

## 内存数据库

将数据库存放在内存中，速度更快，提高了性能

## 比较

### 关系型数据库与NoSQL

![](http://cdn.frankjoey.com//img2/202211011722923.png)

### 关系型数据库与内存数据库

![](http://cdn.frankjoey.com//img2/202211011729561.png)

### 关系型数据库与文件系统

![](http://cdn.frankjoey.com//img2/202211011740849.png)

## 数据库集群

三层，客户端，服务器，数据库

### 主从数据库

![](http://cdn.frankjoey.com//img2/202211011751311.png)

主从复制

在写入的时候写入到主数据库，在读取的时候在从数据库中读取。有一个主库和多个从库，主库和从库之间同步数据。

所以一般写的时候比较慢，但是读的时候比较快

### 缓存数据库

![](http://cdn.frankjoey.com//img2/202211011755397.png)

以缓存来缓解读取压力，从数据库存到缓存，读取是提高性能